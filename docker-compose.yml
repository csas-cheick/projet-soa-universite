version: '3.8'

services:
  # 1. API GATEWAY (Port 8081)
  api-gateway:
    build: ./services/api-gateway
    container_name: soa-gateway
    ports:
      - "8081:8081"
    depends_on:
      - auth-service
      - course-service
      - student-service

  # 2. SERVICE AUTH (Port 8083)
  auth-service:
    build: ./services/auth-service
    container_name: soa-auth
    ports:
      - "8083:8083"

  # 3. SERVICE COURS (Port 8082)
  course-service:
    build: ./services/course-service
    container_name: soa-course
    ports:
      - "8082:8082"
    environment:
      - MONGO_URI=${MONGO_URI}

  # 4. SERVICE FACTURATION (Port 5000)
  billing-service:
    build: ./services/billing-service
    container_name: soa-billing
    ports:
      - "5000:8080"
    environment:
      - MONGO_URI=${MONGO_URI}

  # 5. SERVICE Ã‰TUDIANTS (Port 3000)
  student-service:
    build: ./services/student-service
    container_name: soa-student
    ports:
      - "3000:3000"

  # 6. SERVICE NOTES (Port 8000)
  grade-service:
    build: ./services/grade-service
    container_name: soa-grade
    ports:
      - "8000:8000"